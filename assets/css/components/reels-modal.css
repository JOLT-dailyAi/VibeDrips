/* Reels Modal - Fullscreen Overlay */

.reels-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.95);
  z-index: 1000;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.reels-modal.hidden {
  display: none;
}

/* üèóÔ∏è Navigation Hub - Vertical Stack on Right */
.reels-nav-hub {
  position: absolute;
  top: 0;
  bottom: 0;
  right: 2rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 1.5rem;
  align-items: center;
  z-index: 1002;
  pointer-events: none;
}

/* üîò Shared Button Base */
.reels-close-btn,
.reels-nav-btn {
  background: rgba(0, 0, 0, 0.4);
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: white;
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  pointer-events: auto;
  backdrop-filter: blur(10px);
  padding: 0;
}

.reels-close-btn:hover,
.reels-nav-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.5);
  transform: scale(1.1);
}

.reels-close-btn:active,
.reels-nav-btn:active {
  transform: scale(0.95);
}

/* Close Button stays at the top of the hub if desired, 
   but user wants vertical alignment like lightbox. 
   In lightbox, close is usually outside or part of the hub.
   Let's keep them all in the hub for perfect alignment. 
*/
.reels-close-btn {
  margin-bottom: 2rem;
  /* Give close some space from nav */
  position: relative;
  top: auto;
  right: auto;
}

/* Navigation Arrows */
.reels-nav-btn {
  font-size: 20px;
  line-height: 1;
}

/* HIDE arrows when at boundaries (controlled by JS) */
.reels-nav-btn.hidden {
  display: none !important;
}

/* Mobile Polish */
@media (max-width: 767px) {
  .reels-nav-hub {
    right: 1rem;
    gap: 1rem;
  }

  .reels-close-btn,
  .reels-nav-btn {
    width: 44px;
    height: 44px;
  }

  .reels-close-btn {
    margin-bottom: 1rem;
  }
}

/* Scroll Container - INSTAGRAM/SHORTS MODE (NO PEEKING) */
.reels-scroll-container {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
  padding: 0;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.reels-scroll-container::-webkit-scrollbar {
  display: none;
}

/* Reel Section - EXACT 100vh per reel - CENTERED */
.reel-section {
  scroll-snap-align: start;
  scroll-snap-stop: always;
  height: 100vh;
  min-height: 100vh;
  max-height: 100vh;
  width: 100vw;
  display: flex;
  align-items: center;
  /* ‚úÖ Vertical centering */
  justify-content: center;
  /* ‚úÖ Horizontal centering */
  padding: 0;
  overflow: hidden;
  position: relative;
}

/* ==================== DESKTOP: Side-by-Side Layout (‚â•1200px) ==================== */
@media (min-width: 1200px) {
  .reel-section {
    padding: 20px;
  }

  .reel-content {
    display: flex;
    gap: 30px;
    max-width: 1400px;
    width: 100%;
    height: 833px;
    /* ‚úÖ FIXED: 763 + 40 (padding) + 30 (gap) */
    max-height: 833px;
    margin: 0 auto;
    /* Horizontal centering */
    padding: 20px;
    box-sizing: border-box;
  }

  .reel-video {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    height: 763px;
    /* ‚úÖ CAPPED HEIGHT */
    max-height: 763px;
  }

  .reel-video iframe {
    width: 100%;
    height: 100%;
    max-height: 763px;
    /* ‚úÖ CAPPED HEIGHT */

    /* OPTION A: Maintain aspect ratio (ACTIVE) */
    max-width: 100%;
    object-fit: contain;

    /* OPTION B: Width adjusts freely (COMMENTED OUT)
    width: 100%;
    height: 100%;
    */
  }

  .reel-products {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    overflow: hidden;
    height: 763px;
    /* ‚úÖ MATCH VIDEO HEIGHT */
    max-height: 763px;
  }
}

/* ==================== TABLET: Side-by-Side (768px-1199px) ==================== */
@media (min-width: 768px) and (max-width: 1199px) {
  .reel-section {
    padding: 20px;
  }

  .reel-content {
    display: flex;
    gap: 20px;
    max-width: 1000px;
    width: 100%;
    height: 823px;
    /* ‚úÖ FIXED: 763 + 40 (padding) + 20 (gap) */
    max-height: 823px;
    margin: 0 auto;
    padding: 20px;
    box-sizing: border-box;
  }

  .reel-video {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    height: 763px;
    /* ‚úÖ CAPPED HEIGHT */
    max-height: 763px;
  }

  .reel-video iframe {
    width: 100%;
    height: 100%;
    max-height: 763px;
    /* ‚úÖ CAPPED HEIGHT */

    /* OPTION A: Maintain aspect ratio (ACTIVE) */
    max-width: 100%;
    object-fit: contain;

    /* OPTION B: Width adjusts freely (COMMENTED OUT)
    width: 100%;
    height: 100%;
    */
  }

  .reel-products {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    overflow: hidden;
    height: 763px;
    /* ‚úÖ MATCH VIDEO HEIGHT */
    max-height: 763px;
  }
}

/* ==================== MOBILE PORTRAIT: Stacked ==================== */
@media (max-width: 767px) and (orientation: portrait) {
  .reel-section {
    padding: 0;
    height: 100vh;
    min-height: 100vh;
    max-height: 100vh;
    width: 100vw;
  }

  .reel-content {
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 793px;
    /* ‚úÖ FIXED: 763 + 20 (padding) + 10 (gap) */
    max-height: 793px;
    padding: 10px;
    box-sizing: border-box;
    margin: 0 auto;
    gap: 10px;
  }

  .reel-video {
    flex: 0 0 763px;
    /* ‚úÖ FIXED HEIGHT */
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    max-height: 763px;
    width: 100%;
    height: 763px;
  }

  .reel-video iframe {
    width: 100%;
    max-width: 100%;
    height: 100%;
    max-height: 763px;
    /* ‚úÖ CAPPED HEIGHT */

    /* OPTION A: Maintain aspect ratio (ACTIVE) */
    object-fit: contain;

    /* OPTION B: Width adjusts freely (COMMENTED OUT)
    width: 100%;
    height: 100%;
    */
  }

  .reel-products {
    flex: 1;
    /* Take remaining space */
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    overflow: hidden;
    width: 100%;
  }

  .reels-close-btn {
    top: 15px;
    right: 15px;
  }
}

/* ==================== MOBILE LANDSCAPE: 50/50 Side-by-Side ==================== */
@media (max-width: 767px) and (orientation: landscape) {
  .reel-section {
    padding: 0;
    height: 100vh;
    width: 100vw;
    margin: 0;
  }

  .reel-content {
    display: flex;
    flex-direction: row;
    gap: 10px;
    width: 100vw;
    max-width: 100vw;
    height: 793px;
    /* ‚úÖ FIXED: 763 + 20 (padding) + 10 (gap) */
    max-height: 793px;
    margin: 0 auto;
    padding: 10px;
    box-sizing: border-box;
  }

  .reel-video {
    flex: 0 0 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    height: 763px;
    /* ‚úÖ CAPPED HEIGHT */
    max-height: 763px;
    width: 50%;
  }

  .reel-video iframe {
    width: 100%;
    max-width: 100%;
    height: 100%;
    max-height: 763px;
    /* ‚úÖ CAPPED HEIGHT */

    /* OPTION A: Maintain aspect ratio (ACTIVE) */
    object-fit: contain;

    /* OPTION B: Width adjusts freely (COMMENTED OUT)
    width: 100%;
    height: 100%;
    */
  }

  .reel-products {
    flex: 0 0 50%;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    overflow: hidden;
    height: 763px;
    /* ‚úÖ MATCH VIDEO HEIGHT */
    max-height: 763px;
    width: 50%;
  }

  .reels-close-btn {
    top: 10px;
    right: 10px;
  }
}

/* ==================== OPTIONAL: Viewport-Relative Fallback (COMMENTED OUT) ==================== */
/*
@media (max-height: 800px) {
  .reel-video {
    max-height: min(763px, 80vh);
    height: min(763px, 80vh);
  }
  
  .reel-products {
    max-height: min(763px, 80vh);
    height: min(763px, 80vh);
  }
  
  .reel-content {
    height: auto;
    max-height: 95vh;
  }
}
*/

/* Animation - Fade In */
@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

.reels-modal:not(.hidden) {
  animation: fadeIn 0.3s ease;
}

/* ========================================
   MOBILE LANDSCAPE OPTIMIZATION
   Maximize space and dodge Dynamic Islands
   (STRICTLY LANDSCAPE ONLY)
   ======================================== */

@media (max-width: 950px) and (orientation: landscape) {
  .reel-content {
    width: 100vw !important;
    max-width: 100vw !important;
    height: 100vh !important;
    max-height: 100vh !important;
    padding: 0 env(safe-area-inset-right, 20px) 0 env(safe-area-inset-left, 20px) !important;
    gap: 15px !important;
  }

  .reel-video {
    flex: 0 0 40% !important;
    height: 95vh !important;
    max-height: 95vh !important;
  }

  .reel-products {
    flex: 1 !important;
    height: 95vh !important;
    max-height: 95vh !important;
  }

  /* Reposition floating close button for safe areas */
  .reels-modal .reels-close-btn {
    top: env(safe-area-inset-top, 15px) !important;
    right: calc(15px + env(safe-area-inset-right, 0px)) !important;
  }

  /* Adjust side-nav buttons if they exist */
  .reels-nav-btn {
    right: calc(10px + env(safe-area-inset-right, 0px)) !important;
  }
}

/* ========================================
   GLOBAL SAFE-AREA POLISH
   Protect UI from Dynamic Island / Notch
   ======================================== */

.reels-modal {
  padding-top: env(safe-area-inset-top, 0px) !important;
}

/* No longer needed fixed positions */
.reels-modal .reels-close-btn {
  top: auto !important;
}